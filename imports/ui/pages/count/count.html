<template name="count">
  {{> header noReturn=true}}
  <main class="responsive">
    {{#if Template.subscriptionsReady}}
    <!--  -->
    {{> theCount happening=happening isOwner=isOwner}}
    <div class="space"></div>
    {{#unless participant}}
    <div class="space"></div>
    <button class="primary round responsive extra elevate upper" id="countBtn">
      <i>group</i>
      <span>Je participe, comptez-moi.</span>
    </button>
    <h6 class="center-align upper">ou</h6>
    <div class="space"></div>
    <button class="secondary round responsive extra elevate upper" id="likeBtn">
      <i>favorite</i>
      <span>Je soutiens, comptez-moi.</span>
    </button>
    {{else}}
    <h3 class="small center-align">Vous êtes déjà compté en tant que</h3>
    <h2 class="small center-align upper">
      {{#if participant.isLike}}soutien{{else}}participant{{/if}}
    </h2>
    <h6 class="small center-align">Le {{toLocaleDate participant.createdAt}}</h6>
    <div class="medium no-padding center-align top-align">
      <div class="padding">
        {{#if participant.rating}}
        <!--  -->
        {{> fiveStars size="huge" rating=participant.rating isReadOnly=true}}
        <!--  -->
        {{else}}
        <!--  -->
        <h5 class="small center-align">Vous pouvez aussi donner votre avis</h5>
        {{> fiveStars size="huge"}}
        <div class="space"></div>
        <button class="primary round elevate" id="rateBtn">Je donne mon avis</button>
        <!--  -->
        {{/if}}
      </div>
    </div>
    <div class="space"></div>
    <a
      href="/compteur/{{happening.slug}}"
      class="secondary round button responsive large elevate upper"
    >
      Voir et partager le compteur
    </a>
    {{/unless}}
    <div class="large-divider"></div>
    <p class="bold">
      Le site n'enregistre pas de données personnelles, il crée une clé unique et anonyme par
      participant pour garantir l'unicité du compte de chaque participation.
    </p>
    <p class="center-align">
      Votre clé unique est :<br />
      <code> {{uuid}} </code>
    </p>
    {{#if participant}}
    <div class="large-divider"></div>
    <button class="responsive round small border upper red-text" id="removeParticipantBtn">
      Supprimer mon comptage
    </button>
    <div class="space"></div>
    {{/if}} {{else}} {{> loading }} {{/if}}
  </main>
</template>
