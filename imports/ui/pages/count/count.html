<template name="count">
  {{> header noReturn=true}}
  <main class="responsive">
    {{#if Template.subscriptionsReady}}
    <article>
      <h2 class="small">{{happening.title}}</h2>
      <h1 class="primary small right-align">
        <i class="left absolute padding extra">group</i>
        <span class="padding">{{formatNumber happening.count}}</span>
        <div class="tooltip">Participants</div>
      </h1>
      <h2 class="secondary small right-align">
        <i class="left absolute padding extra">favorite</i>
        <span class="padding">{{formatNumber happening.likes}}</span>
        <div class="tooltip">Soutients</div>
      </h2>
    </article>
    <div class="space"></div>
    {{#unless participant}}
    <button class="primary responsive extra large-elevate upper" id="countBtn">
      <i>group</i>
      <span>Je participe, comptez-moi</span>
    </button>
    <h4 class="center-align">OU</h4>
    <button class="secondary responsive extra large-elevate upper" id="likeBtn">
      <i>favorite</i>
      <span>Je soutient, comptez-moi</span>
    </button>
    {{else}}
    <h4 class="small center-align">
      Vous avez déjà été compté<br />
      en temps que {{#if participant.isLike}}soutient{{else}}participant{{/if}}<br />
      {{toLocaleDate participant.createdAt}}
    </h4>
    <a href="/happening/{{happening._id}}" class="primary button responsive upper">
      Voir et partager le compteur
    </a>
    {{/unless}}
    <div class="medium-divider"></div>
    <p>
      Aucune donnée personnelle n'est enregitrée. Le site créé un identifiant unique et anonyme pour
      garantir l'unicité du compte de chaque participant.
    </p>
    <p class="small">
      Votre identifiant unique :<br />
      {{uuid}}
    </p>
    {{#if participant}}
    <div class="space"></div>
    <button class="responsive red small" id="removeParticipantBtn">Supprimmer mon comptage</button>
    {{/if}} {{else}} {{> loading }} {{/if}}
  </main>
</template>
